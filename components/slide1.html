<link rel="stylesheet" href="/_css/_slide1.css">




<div id="container_box_slide">
	<div id="box_slide">
		<div class="box_items">
			<div class="box_items_img">
				<img src="/assets/img/1.jpg">
			</div>
			<article>
				<span>Lorem, ipsum dolor.</span>
				<div>Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci beatae mollitia, ut itaque
					nihil quia fugiat distinctio libero possimus eveniet.</div>
			</article>
		</div>
		<div class="box_items">
			<div class="box_items_img">
				<img src="/assets/img/2.jpg">
			</div>
			<article>
				<span>Lorem, ipsum dolor.</span>
				<div>Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci beatae mollitia, ut itaque
					nihil quia fugiat distinctio libero possimus eveniet.</div>
			</article>

		</div>
		<div class="box_items">
			<div class="box_items_img">
				<img src="/assets/img/3.jpg">
			</div>
			<article>
				<span>Lorem, ipsum dolor.</span>
				<div>Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci beatae mollitia, ut itaque
					nihil quia fugiat distinctio libero possimus eveniet.</div>
			</article>

		</div>
		<div class="box_items">
			<div class="box_items_img">
				<img src="/assets/img/4.jpg">
			</div>
			<article>
				<span>Lorem, ipsum dolor.</span>
				<div>Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci beatae mollitia, ut itaque
					nihil quia fugiat distinctio libero possimus eveniet.</div>
			</article>

		</div>
		<div class="box_items">
			<div class="box_items_img">
				<img src="/assets/img/5.jpg">
			</div>
			<article>
				<span>Lorem, ipsum dolor.</span>
				<div>Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci beatae mollitia, ut itaque
					nihil quia fugiat distinctio libero possimus eveniet.</div>
			</article>
		</div>
		<div class="box_items">
			<div class="box_items_img">
				<img src="/assets/img/6.jpg">
			</div>
			<article>
				<span>Lorem, ipsum dolor.</span>
				<div>Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci beatae mollitia, ut itaque
					nihil quia fugiat distinctio libero possimus eveniet.</div>
			</article>
		</div>
	</div>
	<div id="dot-indicators"></div>
</div>

<script>
	$(document).ready(function () {
		const $container = $('#box_slide');
		const $items = $container.find('.box_items');
		const $dotIndicators = $('#dot-indicators');
		let initialXPosition = null;
		let currentXPosition = null;
		const dragThreshold = 20; // Minimum drag distance to switch items
		const autoplayDelay = 3000; // Delay between auto-scrolls (in milliseconds)
		let autoplayInterval = null;

		// Create dots based on the number of items
		$items.each(function (index) {
			$dotIndicators.append(`<div class="dot" data-index="${index}"></div>`);
		});

		// Explicitly set the first item and dot as active
		function setActive(index) {
			$items.removeClass('active').eq(index).addClass('active');
			$dotIndicators.find('.dot').removeClass('active').eq(index).addClass('active');
			$items.eq(index)[0].scrollIntoView({ behavior: 'smooth', inline: 'start' });
		}

		// Initialize active state for the first item
		setActive(0);

		// Add click event listener to dots
		$dotIndicators.on('click', '.dot', function () {
			const index = $(this).data('index');
			setActive(index);
			resetAutoplay();
		});

		// Handle dragging behavior
		function handleDragEnd() {
			if (initialXPosition !== null && currentXPosition !== null) {
				const dragDistance = currentXPosition - initialXPosition;
				const activeIndex = $items.filter('.active').index();
				let newIndex = activeIndex;

				if (Math.abs(dragDistance) >= dragThreshold) {
					if (dragDistance < 0) {
						newIndex = (activeIndex + 1) % $items.length; // Next item or loop back to the first
					} else {
						newIndex = (activeIndex - 1 + $items.length) % $items.length; // Previous item or loop to the last
					}
					setActive(newIndex);
					resetAutoplay();
				}
			}
			initialXPosition = currentXPosition = null;
		}

		// Event listeners for dragging
		$container
			.on('mousedown touchstart', function (e) {
				initialXPosition = e.type === 'mousedown' ? e.clientX : e.originalEvent.touches[0].clientX;
			})
			.on('mousemove touchmove', function (e) {
				if (initialXPosition !== null) {
					currentXPosition = e.type === 'mousemove' ? e.clientX : e.originalEvent.touches[0].clientX;
				}
			})
			.on('mouseup touchend', handleDragEnd);

		// Enable mouse wheel scrolling with looping
		$container.on('wheel', function (e) {
			e.preventDefault();
			const activeIndex = $items.filter('.active').index();
			let newIndex = activeIndex;

			if (e.originalEvent.deltaY > 0) {
				newIndex = (activeIndex + 1) % $items.length; // Next item or loop back to the first
			} else {
				newIndex = (activeIndex - 1 + $items.length) % $items.length; // Previous item or loop to the last
			}
			setActive(newIndex);
			resetAutoplay();
		});

		// Autoplay functionality
		function autoplay() {
			const activeIndex = $items.filter('.active').index();
			const newIndex = (activeIndex + 1) % $items.length; // Next item or loop back to the first
			setActive(newIndex);
		}

		function startAutoplay() {
			autoplayInterval = setInterval(autoplay, autoplayDelay);
		}

		function resetAutoplay() {
			clearInterval(autoplayInterval);
			startAutoplay();
		}

		// Start autoplay when page loads
		startAutoplay();
	});
</script>